/* Theme variables and dark mode support */
:root{
  --bg: #ffffff;
  --surface: #ffffff;
  --text: #2c3e50;
  --muted: #666666;
  --primary: #00a87e;
  --accent: #007b60;
  --card-shadow: rgba(0,0,0,0.06);
}

/* Dark theme when body has .dark */
body.dark{
  --bg: #0f1720;
  --surface: #111827;
  --text: #e6eef6;
  --muted: #9aa6b2;
  --primary: #0fbf9b;
  --accent: #0aa178;
  --card-shadow: rgba(0,0,0,0.6);
}

/* Backwards-compatible variable mapping for templates that use older variable names
   (many templates set --secondary-color and --text-color inline). This ensures
   those templates pick up dark values when .dark is active. */
body.dark {
  --secondary-color: var(--bg);
  --text-color: var(--text);
  --primary-color: var(--primary);
}

/* Smooth transitions to avoid flash */
body, .card, .listing-card, .profile-header, .seller-header{
  transition: background-color 180ms ease, color 180ms ease, box-shadow 180ms ease;
}

body{
  background: var(--bg);
  color: var(--text);
}

a{ color: var(--primary); }

.navbar, .card, .listing-card, .profile-header{
  background: var(--surface);
}

/* Ensure Bootstrap's .btn-primary matches our theme variables across templates
   Templates historically used --primary-color while theme.css uses --primary.
   Provide a resilient override that prefers --primary, falls back to
   --primary-color (template-level) and finally to a safe hex. */
.btn-primary {
  background-color: var(--primary, var(--primary-color, #00a87e)) !important;
  border-color: var(--primary, var(--primary-color, #00a87e)) !important;
  color: #fff !important;
}

.small-muted{ color: var(--muted); }

/* Utility for dark-mode aware meta tile or other elements */
.theme-badge{ background: var(--primary); color: #fff; padding: 2px 6px; border-radius: 4px; }

/* Strong overrides for templates that use hard-coded colors so dark mode applies
  even when templates include page-specific <style> blocks. These rules are
  intentionally specific and may use !important to override earlier declarations. */
body.dark .navbar { background: var(--surface) !important; color: var(--text) !important; }
body.dark .navbar .nav-link { color: var(--text) !important; }
body.dark .hero-section { background: var(--surface) !important; border-bottom-color: rgba(255,255,255,0.04) !important; }
body.dark .listing-card, body.dark .card, body.dark .profile-header, body.dark .seller-header { background: var(--surface) !important; box-shadow: 0 6px 18px var(--card-shadow) !important; color: var(--text) !important; }
body.dark .listing-card .description, body.dark .listing-card p, body.dark .card p { color: var(--muted) !important; }
body.dark .price { color: var(--primary) !important; }
body.dark .seller-info .rating, body.dark .rating { color: #f6c000 !important; }
body.dark img[style], body.dark img { background: transparent !important; border-color: rgba(255,255,255,0.06) !important; }
body.dark .site-footer-bg { background: var(--surface) !important; color: var(--text) !important; border-top-color: var(--primary) !important; }
body.dark .site-footer .footer-link { color: var(--text) !important; }
body.dark .site-footer .footer-link:hover { color: var(--accent) !important; }
body.dark .btn-primary { background-color: var(--primary) !important; border-color: var(--primary) !important; }
body.dark .text-muted, body.dark .small-muted { color: var(--muted) !important; }

/* Inputs, forms */
body.dark input, body.dark textarea, body.dark select, body.dark .form-control { background: #0b1220 !important; color: var(--text) !important; border-color: rgba(255,255,255,0.06) !important; }

/* Admin/table specific dark-mode rules */
body.dark table, body.dark .table { color: var(--text) !important; background: transparent !important; }
body.dark .table th, body.dark .table td { color: var(--text) !important; border-color: rgba(255,255,255,0.06) !important; }
body.dark .table thead th { background: rgba(255,255,255,0.02) !important; }
body.dark .table-striped tbody tr:nth-of-type(odd) { background-color: rgba(255,255,255,0.01) !important; }
body.dark .table-striped tbody tr { background-color: transparent !important; }
body.dark .card, body.dark .card * { color: var(--text) !important; }
body.dark h1, body.dark h2, body.dark h3, body.dark h4, body.dark h5, body.dark h6 { color: var(--text) !important; }

/* Ensure global page background and primary text color switch in dark mode even
   when templates use inline root variables like --secondary-color / --text-color */
body.dark, body.dark body {
  background-color: var(--bg) !important;
  color: var(--text) !important;
}

/* Responsive helpers: improve layout on small screens (phones/tablets) */
/* Reduce card padding, smaller images, stack controls vertically where appropriate */
@media (max-width: 767.98px) {
  .listing-card {
    padding: 10px !important;
  }
  .listing-card .description { font-size: 0.95rem; }
  .listing-card img { max-height: 120px !important; width: 100% !important; height: auto !important; object-fit: contain !important; }
  .price { font-size: 1.1rem; }
  .seller-info { font-size: 0.85rem; }
  /* make small action buttons within listing cards easier to tap on phones (scoped) */
  .listing-card .btn-sm { padding: .45rem .6rem; font-size: .95rem; }
  /* stack footer controls inside listing-card only when they are direct children (safer) */
  .listing-card > .d-flex.justify-content-between { flex-direction: column; gap: .5rem; align-items: flex-start; }
  .listing-card > .d-flex.justify-content-between .btn { width: 100%; max-width: none; }
  /* Stack navbar controls on small screens so nothing overflows */
  .site-navbar .navbar-collapse .navbar-right { flex-direction: column; align-items: stretch; gap: .5rem; }
  .site-navbar .navbar-collapse .navbar-right .form-control { width: 100%; }
  .site-navbar .navbar-collapse .navbar-right .auth-buttons, .site-navbar .navbar-collapse .navbar-right .user-info { width: 100%; display: flex; justify-content: flex-start; }
  .site-navbar .navbar-collapse .navbar-right .auth-buttons a { width: auto; }
}

/* Make mobile actions dropdown full width inside collapsed navbar */
@media (max-width: 991.98px) {
  .navbar-nav .dropdown-menu { width: 100%; }
  .navbar-nav .dropdown-menu .form-control { width: 100%; }
}

@media (max-width: 575.98px) {
  /* Extra-small screens: tighten spacing and increase tap targets */
  .listing-card { padding: 8px !important; }
  .listing-card img { max-height: 100px !important; }
  .listing-card h5 { font-size: 1rem; margin-bottom: .35rem; }
  .price { font-size: 1rem; }
  /* avoid globally forcing btn-sm to be block â€” only listing-card footers should expand */
  .listing-card > .d-flex.justify-content-between .btn-sm { display: block; width: 100%; }
}

/* Disable subtle hover transform on touch devices to avoid jumpiness */
@media (hover: none) {
  .listing-card:hover { transform: none !important; box-shadow: 0 2px 6px var(--card-shadow) !important; }
}

/* Navbar brand (Card Haven) and prominent headings */
/* Navbar brand (Card Haven) and prominent headings */
/* Ensure brand uses theme text color in light and dark modes. Templates use .site-navbar to opt in. */
.site-navbar .navbar-brand, .site-navbar .navbar-brand span, .site-navbar .navbar-brand a {
  color: var(--text) !important;
}

body.dark .navbar-brand, body.dark .navbar-brand span, body.dark .navbar-brand a {
  color: var(--text) !important;
}

body.dark .hero-section, body.dark .hero-section h1, body.dark .hero-section p {
  background: var(--surface) !important;
  color: var(--text) !important;
}

